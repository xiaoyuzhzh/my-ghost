var ALY = require('./index.js');
var utf8 = require('utf8');

ALY.config.update({
  accessKeyId: 'DpqmTnnCVV45s7gP',
  secretAccessKey: 'wJT5OddEiVW0o3BqolssXmD5MYWTJv'
});

var oss = new ALY.OSS({
  endpoint: 'http://oss-cn-hangzhou.aliyuncs.com',
  apiVersion: '2013-10-15'
});

var fs = require('fs');

fs.readFile('README.md', function (err, data) {
  if (err) {
    console.log('error:', err);
    return;
  }

  oss.putObject({
      Bucket: 'chylvina',
      Key: '测试/你好',
      Body: data,
      AccessControlAllowOrigin: '',
      ContentType: 'text/plain',
      CacheControl: 'no-cache',         // 参考: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9
      ContentDisposition: '',           // 参考: http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1
      ContentEncoding: 'utf-8',         // 参考: http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11
      ServerSideEncryption: '',
      Expires: 60
    },
    function (err, data) {

      if (err) {
        console.log('error:', err);
        return;
      }

      console.log('success:', data);

    });
});
